language: generic
os: linux
dist: trusty
sudo: required
addons:
  apt:
    packages:
      - g++-7
    sources:
      - ubuntu-toolchain-r-test
env:
  global:
    - CORE=chailove
    - COMPILER_NAME=gcc CXX=g++-7 CC=gcc-7
  matrix:
    - PLATFORM=3ds
    - PLATFORM=linux_x64
    - PLATFORM=ngc
    - PLATFORM=wii
    - PLATFORM=wiiu
before_script:
  - pwd
  - mkdir -p ~/bin
  - ln -s /usr/bin/gcc-7 ~/bin/gcc
  - ln -s /usr/bin/g++-7 ~/bin/g++
  - ln -s /usr/bin/cpp-7 ~/bin/cpp
  - export PATH=~/bin:$PATH
  - ls -l ~/bin
  - echo $PATH
  - g++-7 --version
  - g++ --version
script:
  - git clone --depth=1 -b patch-29 https://github.com/RobLoach/libretro-super ~/libretro-super
  - cd ~/libretro-super/travis
  - ./build.sh
